<div class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,.5);">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!-- HEADER -->
      <div class="modal-header">
        <h5 class="modal-title">
          {{ editingItem ? 'Editar' : 'Criar' }}
          {{ activeTab === 'news' ? 'Notícia' : activeTab === 'services' ? 'Serviço' : 'Convênio' }}
        </h5>
        <button type="button" class="btn-close" (click)="close.emit()"></button>
      </div>

      <!-- BODY -->
      <div class="modal-body" *ngIf="form">
        <form [formGroup]="form">

          <!-- NEWS -->
          <ng-container *ngIf="activeTab === 'news'">
            <div class="mb-3">
              <label class="form-label">Título</label>
              <input type="text" class="form-control" formControlName="title">
              <div class="text-danger" *ngIf="form.get('title')?.touched && form.get('title')?.invalid">Título obrigatório</div>
            </div>

            <div class="mb-3">
              <label class="form-label">Resumo</label>
              <textarea class="form-control" rows="3" formControlName="summary"></textarea>
              <div class="text-danger" *ngIf="form.get('summary')?.touched && form.get('summary')?.invalid">Resumo obrigatório</div>
            </div>

            <div class="mb-3">
              <label class="form-label">Conteúdo</label>
              <textarea class="form-control" rows="6" formControlName="content"></textarea>
              <div class="text-danger" *ngIf="form.get('content')?.touched && form.get('content')?.invalid">Conteúdo obrigatório</div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Autor</label>
                <input type="text" class="form-control" formControlName="author">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Categoria</label>
                <input type="text" class="form-control" formControlName="category">
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label">URL da Imagem</label>
              <input type="url" class="form-control" formControlName="image_url">
              <div class="text-danger" *ngIf="form.get('image_url')?.invalid && form.get('image_url')?.touched">Informe uma URL válida</div>
            </div>

            <div class="form-check">
              <input class="form-check-input" type="checkbox" formControlName="is_published">
              <label class="form-check-label">Publicar notícia</label>
            </div>
          </ng-container>

          <!-- SERVICES -->
          <ng-container *ngIf="activeTab === 'services'">
            <div class="mb-3">
              <label class="form-label">Nome do Serviço</label>
              <input type="text" class="form-control" formControlName="name">
            </div>
            <div class="mb-3">
              <label class="form-label">Descrição</label>
              <textarea class="form-control" rows="4" formControlName="description"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Categoria</label>
                <input type="text" class="form-control" formControlName="category">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Ícone</label>
                <input type="text" class="form-control" formControlName="icon">
              </div>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" formControlName="is_active">
              <label class="form-check-label">Serviço ativo</label>
            </div>
          </ng-container>

          <!-- CONVENIOS -->
          <ng-container *ngIf="activeTab === 'convenios'">
            <div class="mb-3">
              <label class="form-label">Nome do Convênio</label>
              <input type="text" class="form-control" formControlName="name">
            </div>
            <div class="mb-3">
              <label class="form-label">Descrição</label>
              <textarea class="form-control" rows="3" formControlName="description"></textarea>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Categoria</label>
                <input type="text" class="form-control" formControlName="category">
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Telefone</label>
                <input type="tel" class="form-control" formControlName="phone">
                <div class="text-danger" *ngIf="form.get('phone')?.invalid && form.get('phone')?.touched">Telefone inválido</div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" formControlName="email">
                <div class="text-danger" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">E-mail inválido</div>
              </div>
              <div class="col-md-6 mb-3">
                <label class="form-label">Website</label>
                <input type="url" class="form-control" formControlName="website_url">
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">URL do Logo</label>
              <input type="url" class="form-control" formControlName="logo_url">
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" formControlName="is_active">
              <label class="form-check-label">Convênio ativo</label>
            </div>
          </ng-container>
        </form>
      </div>

      <!-- FOOTER -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="close.emit()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="handleSave()" [disabled]="form.invalid">Salvar</button>
      </div>

    </div>
  </div>
</div>
