<div class="modal fade show d-block" tabindex="-1" style="background: rgba(0,0,0,.5);">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!-- HEADER -->
      <div class="modal-header">
        <h5 class="modal-title">
          {{ editingItem ? 'Editar' : 'Criar' }}
          {{ activeTab === 'news' ? 'Notícia' : activeTab === 'services' ? 'Serviço' : 'Convênio' }}
        </h5>
        <button type="button" class="btn-close" (click)="close.emit()"></button>
      </div>

      <!-- BODY -->
      <div class="modal-body" *ngIf="form">
        <form [formGroup]="form">

          <!-- NEWS -->
          <ng-container *ngIf="activeTab === 'news'">
            <div class="mb-3">
              <label class="form-label">Título</label>
              <input type="text" class="form-control" formControlName="title">
            </div>

            <div class="mb-3">
              <label class="form-label">Descrição</label>
              <textarea class="form-control" rows="3" formControlName="description"></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label">Conteúdo</label>
              <textarea class="form-control" rows="6" formControlName="content"></textarea>
            </div>

            <div class="mb-3">
              <label class="form-label">Categoria</label>
              <input type="text" class="form-control" formControlName="category">
            </div>

            <div class="mb-3">
              <label class="form-label">Imagem</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('imageFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('imageFile')?.value?.name }}</small>
              </div>
            </div>

            <div class="form-check">
              <input class="form-check-input" type="checkbox" formControlName="isPublished">
              <label class="form-check-label">Publicar notícia</label>
            </div>
          </ng-container>

          <!-- CONVENIOS -->
          <ng-container *ngIf="activeTab === 'convenios'">
            <div class="mb-3">
              <label class="form-label">Nome do Convênio</label>
              <input type="text" class="form-control" formControlName="name">
            </div>

            <div class="mb-3">
              <label class="form-label">Logo</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('imageFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('imageFile')?.value?.name }}</small>
              </div>
            </div>
          </ng-container>

          <!-- HOME BANNER -->
          <ng-container *ngIf="activeTab === 'homeBanner'">
            <div class="mb-3">
              <label class="form-label">Imagem</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('imageFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('imageFile')?.value?.name }}</small>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Tempo (segundos)</label>
              <input type="number" class="form-control" formControlName="timeSeconds">
            </div>
            <div class="mb-3">
              <label class="form-label">Ordem</label>
              <input type="number" class="form-control" formControlName="order">
            </div>
            <div class="mb-3">
              <label class="form-label">Notícia associada</label>
              <input type="text" class="form-control" formControlName="newsId">
            </div>
          </ng-container>

          <!-- PATIENT MANUAL -->
          <ng-container *ngIf="activeTab === 'patientManual'">
            <div class="mb-3">
              <label class="form-label">Título</label>
              <input type="text" class="form-control" formControlName="title">
            </div>
            <div class="mb-3">
              <label class="form-label">Conteúdo</label>
              <textarea class="form-control" rows="4" formControlName="content"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Imagem</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('imageFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('imageFile')?.value?.name }}</small>
              </div>
            </div>
          </ng-container>

          <!-- PROVIDER -->
          <ng-container *ngIf="activeTab ==='provider'">
            <div class="mb-3">
              <label class="form-label">Nome</label>
              <input type="text" class="form-control" formControlName="name">
            </div>
            <div class="mb-3">
              <label class="form-label">Imagem</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('imageFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('imageFile')?.value?.name }}</small>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Ano Inicial</label>
              <input type="number" class="form-control" formControlName="startYear">
            </div>
            <div class="mb-3">
              <label class="form-label">Ano Final</label>
              <input type="number" class="form-control" formControlName="endYear">
            </div>
          </ng-container>

          <!-- SPECIALTY -->
          <ng-container *ngIf="activeTab ==='specialty'">
            <div class="mb-3">
              <label class="form-label">Nome</label>
              <input type="text" class="form-control" formControlName="name">
            </div>
            <div class="mb-3">
              <label class="form-label">Tipo</label>
              <input type="text" class="form-control" formControlName="type">
            </div>
            <div class="mb-3">
              <label class="form-label">Imagem</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('imageFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('imageFile')?.value?.name }}</small>
              </div>
            </div>
          </ng-container>

          <!-- TRANSPARENCY PORTAL -->
          <ng-container *ngIf="activeTab ==='transparencyPortal'">
            <div class="mb-3">
              <label class="form-label">Nome do Acordo</label>
              <input type="text" class="form-control" formControlName="agreementName">
            </div>
            <div class="mb-3">
              <label class="form-label">Tipo</label>
              <input type="text" class="form-control" formControlName="type">
            </div>
            <div class="mb-3">
              <label class="form-label">Ano Inicial</label>
              <input type="number" class="form-control" formControlName="startYear">
            </div>
            <div class="mb-3">
              <label class="form-label">Ano Final</label>
              <input type="number" class="form-control" formControlName="endYear">
            </div>
            <div class="mb-3">
              <label class="form-label">Arquivo</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('file')?.value">
                <small class="text-success">Selecionado: {{ form.get('file')?.value?.name }}</small>
              </div>
            </div>
          </ng-container>

          <!-- USER -->
          <ng-container *ngIf="activeTab ==='user'">
            <div class="mb-3">
              <label class="form-label">Usuário</label>
              <input type="text" class="form-control" formControlName="username">
            </div>
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input type="email" class="form-control" formControlName="email">
            </div>
            <div class="mb-3">
              <label class="form-label">Tipo de Usuário</label>
              <input type="text" class="form-control" formControlName="userType">
            </div>
            <div class="mb-3">
              <label class="form-label">Departamento</label>
              <input type="text" class="form-control" formControlName="department">
            </div>
            <div class="mb-3">
              <label class="form-label">Foto</label>
              <input type="file" class="form-control" (change)="onFileSelected($event, 'file')">
              <div *ngIf="form.get('photoFile')?.value">
                <small class="text-success">Selecionado: {{ form.get('photoFile')?.value?.name }}</small>
              </div>
            </div>
          </ng-container>
        </form>
      </div>

      <!-- FOOTER -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="close.emit()">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="handleSave()" [disabled]="form.invalid">Salvar</button>
      </div>

    </div>
  </div>
</div>
