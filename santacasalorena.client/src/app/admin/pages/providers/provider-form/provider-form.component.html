
<div class="provider-form-container">
  <!-- Page Header -->
  <div class="page-header mb-4">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h2 class="page-title mb-1">
          {{ isEditMode ? 'Editar Fornecedor' : 'Novo Fornecedor' }}
        </h2>
        <p class="page-subtitle text-muted mb-0">
          {{ isEditMode ? 'Edite as informações do fornecedor existente' : 'Preencha os dados para cadastrar um novo fornecedor' }}
        </p>
      </div>
      <button class="btn btn-outline-secondary"
              (click)="cancel()">
        <i class="bi bi-arrow-left me-2"></i>
        Voltar
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="text-center py-5" *ngIf="loading">
    <app-loading-spinner message="Carregando fornecedor..."></app-loading-spinner>
  </div>

  <!-- Provider Form -->
  <div class="card shadow-sm border-0 rounded-3" *ngIf="!loading">
    <div class="card-body">
      <form [formGroup]="providerForm" (ngSubmit)="save()">
        <div class="row">
          <div class="col-md-6">
            <!-- Name -->
            <div class="mb-3">
              <label for="name" class="form-label">Nome do Fornecedor <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('name')"
                     id="name"
                     formControlName="name"
                     placeholder="Ex: Tech Solutions Ltda.">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('name')">
                {{ getFieldError('name') }}
              </div>
            </div>

            <!-- CNPJ -->
            <div class="mb-3">
              <label for="cnpj" class="form-label">CNPJ <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('cnpj')"
                     id="cnpj"
                     formControlName="cnpj"
                     placeholder="Ex: 00.000.000/0001-00">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('cnpj')">
                {{ getFieldError('cnpj') }}
              </div>
            </div>

            <!-- Contact Person -->
            <div class="mb-3">
              <label for="contactPerson" class="form-label">Pessoa de Contato <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('contactPerson')"
                     id="contactPerson"
                     formControlName="contactPerson"
                     placeholder="Ex: Ana Paula">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('contactPerson')">
                {{ getFieldError('contactPerson') }}
              </div>
            </div>

            <!-- Phone -->
            <div class="mb-3">
              <label for="phone" class="form-label">Telefone <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('phone')"
                     id="phone"
                     formControlName="phone"
                     placeholder="Ex: (11) 98765-4321">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('phone')">
                {{ getFieldError('phone') }}
              </div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
              <input type="email"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('email')"
                     id="email"
                     formControlName="email"
                     placeholder="Ex: contato@fornecedor.com">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
                {{ getFieldError('email') }}
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <!-- Address -->
            <div class="mb-3">
              <label for="address" class="form-label">Endereço <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('address')"
                     id="address"
                     formControlName="address"
                     placeholder="Ex: Rua das Flores, 123">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('address')">
                {{ getFieldError('address') }}
              </div>
            </div>

            <!-- City -->
            <div class="mb-3">
              <label for="city" class="form-label">Cidade <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('city')"
                     id="city"
                     formControlName="city"
                     placeholder="Ex: São Paulo">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('city')">
                {{ getFieldError('city') }}
              </div>
            </div>

            <!-- State -->
            <div class="mb-3">
              <label for="state" class="form-label">Estado <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('state')"
                     id="state"
                     formControlName="state"
                     placeholder="Ex: SP">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('state')">
                {{ getFieldError('state') }}
              </div>
            </div>

            <!-- Zip Code -->
            <div class="mb-3">
              <label for="zipCode" class="form-label">CEP <span class="text-danger">*</span></label>
              <input type="text"
                     class="form-control"
                     [class.is-invalid]="isFieldInvalid('zipCode')"
                     id="zipCode"
                     formControlName="zipCode"
                     placeholder="Ex: 01000-000">
              <div class="invalid-feedback" *ngIf="isFieldInvalid('zipCode')">
                {{ getFieldError('zipCode') }}
              </div>
            </div>

            <!-- Service Area -->
            <div class="mb-3">
              <label for="serviceArea" class="form-label">Área de Serviço <span class="text-danger">*</span></label>
              <select class="form-select"
                      [class.is-invalid]="isFieldInvalid('serviceArea')"
                      id="serviceArea"
                      formControlName="serviceArea">
                <option value="">Selecione uma área de serviço</option>
                <option *ngFor="let area of serviceAreas" [value]="area">{{ area }}</option>
              </select>
              <div class="invalid-feedback" *ngIf="isFieldInvalid('serviceArea')">
                {{ getFieldError('serviceArea') }}
              </div>
            </div>

            <!-- Status -->
            <div class="mb-3">
              <label for="status" class="form-label">Status <span class="text-danger">*</span></label>
              <select class="form-select"
                      [class.is-invalid]="isFieldInvalid('status')"
                      id="status"
                      formControlName="status">
                <option *ngFor="let s of statuses" [value]="s.value">{{ s.label }}</option>
              </select>
              <div class="invalid-feedback" *ngIf="isFieldInvalid('status')">
                {{ getFieldError('status') }}
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end mt-4">
          <button type="button"
                  class="btn btn-outline-secondary me-2"
                  (click)="cancel()">
            Cancelar
          </button>
          <button type="submit"
                  class="btn btn-primary"
                  [disabled]="saving">
            <span *ngIf="saving" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            {{ saving ? 'Salvando...' : 'Salvar Fornecedor' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

