<div class="payment-container">
  <!-- Header -->
  <div class="payment-header">
    <div class="container">
      <div class="header-content">
        <button class="back-btn" (click)="goBack()">
          <i class="arrow-left">←</i>
          Voltar
        </button>
        
        <div class="logo-container">
          <img src="assets/img/logo/background.png" alt="Santa Casa de Lorena" class="logo">
        </div>
        
        <div class="security-info">
          <img src="assets/images/ssl-badge.png" alt="Conexão Segura" class="security-badge">
          <span>Conexão Segura</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="payment-content">
    <div class="container">
      <div class="payment-grid">
        <!-- Left Column - Donation Summary -->
        <div class="donation-summary">
          <div class="summary-card">
            <h2>Resumo da Doação</h2>
            
            <div class="donation-details">
              <div class="detail-item">
                <span class="label">Valor da doação:</span>
                <span class="value">R$ {{ donationAmount | currency:'BRL':'symbol':'1.2-2':'pt' }}</span>
              </div>
              
              <div class="detail-item">
                <span class="label">Destinação:</span>
                <span class="value">Santa Casa de Lorena</span>
              </div>
              
              <div class="detail-item">
                <span class="label">Tipo:</span>
                <span class="value">Doação única</span>
              </div>
            </div>
            
            <div class="impact-message">
              <div class="impact-icon">
                <img src="assets/images/icon-heart.png" alt="Coração">
              </div>
              <p>
                Com sua doação de <strong>R$ {{ donationAmount }}</strong>, você está ajudando a 
                manter nossos serviços de saúde gratuitos e de qualidade para quem mais precisa.
              </p>
            </div>
            
            <div class="tax-info">
              <div class="info-icon">
                <img src="assets/images/icon-info.png" alt="Informação">
              </div>
              <p>
                Esta doação pode ser dedutível do imposto de renda. 
                Você receberá o recibo por e-mail após a confirmação do pagamento.
              </p>
            </div>
          </div>
        </div>

        <!-- Right Column - Payment Form -->
        <div class="payment-form-section">
          <div class="payment-card">
            <h2>Dados para Pagamento</h2>
            
            <!-- Payment Methods -->
            <div class="payment-methods">
              <h3>Escolha a forma de pagamento</h3>
              
              <div class="method-options">
                <div class="method-option" 
                     [class.selected]="selectedMethod === 'credit'" 
                     (click)="selectPaymentMethod('credit')">
                  <div class="method-icon">
                    <img src="assets/images/icon-credit-card.png" alt="Cartão de Crédito">
                  </div>
                  <span>Cartão de Crédito</span>
                  <div class="method-check" *ngIf="selectedMethod === 'credit'">✓</div>
                </div>
                
                <div class="method-option" 
                     [class.selected]="selectedMethod === 'pix'" 
                     (click)="selectPaymentMethod('pix')">
                  <div class="method-icon">
                    <img src="assets/images/icon-pix.png" alt="PIX">
                  </div>
                  <span>PIX</span>
                  <div class="method-check" *ngIf="selectedMethod === 'pix'">✓</div>
                </div>
                
                <div class="method-option" 
                     [class.selected]="selectedMethod === 'boleto'" 
                     (click)="selectPaymentMethod('boleto')">
                  <div class="method-icon">
                    <img src="assets/images/icon-boleto.png" alt="Boleto">
                  </div>
                  <span>Boleto Bancário</span>
                  <div class="method-check" *ngIf="selectedMethod === 'boleto'">✓</div>
                </div>
              </div>
            </div>

            <!-- Personal Information Form -->
            <form [formGroup]="paymentForm" (ngSubmit)="processPayment()" class="payment-form">
              <div class="form-section">
                <h3>Dados Pessoais</h3>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="fullName">Nome Completo *</label>
                    <input type="text" 
                           id="fullName" 
                           formControlName="fullName"
                           placeholder="Digite seu nome completo"
                           [class.error]="isFieldInvalid('fullName')">
                    <div class="error-message" *ngIf="isFieldInvalid('fullName')">
                      Nome completo é obrigatório
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="email">E-mail *</label>
                    <input type="email" 
                           id="email" 
                           formControlName="email"
                           placeholder="seu@email.com"
                           [class.error]="isFieldInvalid('email')">
                    <div class="error-message" *ngIf="isFieldInvalid('email')">
                      E-mail válido é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="phone">Telefone</label>
                    <input type="tel" 
                           id="phone" 
                           formControlName="phone"
                           placeholder="(11) 99999-9999"
                           mask="(00) 00000-0000">
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="cpf">CPF *</label>
                    <input type="text" 
                           id="cpf" 
                           formControlName="cpf"
                           placeholder="000.000.000-00"
                           mask="000.000.000-00"
                           [class.error]="isFieldInvalid('cpf')">
                    <div class="error-message" *ngIf="isFieldInvalid('cpf')">
                      CPF válido é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="birthDate">Data de Nascimento</label>
                    <input type="date" 
                           id="birthDate" 
                           formControlName="birthDate">
                  </div>
                </div>
              </div>

              <!-- Credit Card Form -->
              <div class="form-section" *ngIf="selectedMethod === 'credit'">
                <h3>Dados do Cartão</h3>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="cardNumber">Número do Cartão *</label>
                    <input type="text" 
                           id="cardNumber" 
                           formControlName="cardNumber"
                           placeholder="0000 0000 0000 0000"
                           mask="0000 0000 0000 0000"
                           [class.error]="isFieldInvalid('cardNumber')">
                    <div class="error-message" *ngIf="isFieldInvalid('cardNumber')">
                      Número do cartão é obrigatório
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="cardName">Nome no Cartão *</label>
                    <input type="text" 
                           id="cardName" 
                           formControlName="cardName"
                           placeholder="Nome como está no cartão"
                           [class.error]="isFieldInvalid('cardName')">
                    <div class="error-message" *ngIf="isFieldInvalid('cardName')">
                      Nome no cartão é obrigatório
                    </div>
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="expiryDate">Validade *</label>
                    <input type="text" 
                           id="expiryDate" 
                           formControlName="expiryDate"
                           placeholder="MM/AA"
                           mask="00/00"
                           [class.error]="isFieldInvalid('expiryDate')">
                    <div class="error-message" *ngIf="isFieldInvalid('expiryDate')">
                      Data de validade é obrigatória
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="cvv">CVV *</label>
                    <input type="text" 
                           id="cvv" 
                           formControlName="cvv"
                           placeholder="000"
                           mask="000"
                           [class.error]="isFieldInvalid('cvv')">
                    <div class="error-message" *ngIf="isFieldInvalid('cvv')">
                      CVV é obrigatório
                    </div>
                  </div>
                </div>
              </div>

              <!-- Terms and Privacy -->
              <div class="form-section">
                <div class="checkbox-group">
                  <label class="checkbox-label">
                    <input type="checkbox" 
                           formControlName="acceptTerms"
                           [class.error]="isFieldInvalid('acceptTerms')">
                    <span class="checkmark"></span>
                    Aceito os <a href="/terms" target="_blank">Termos de Uso</a> e 
                    <a href="/privacy" target="_blank">Política de Privacidade</a> *
                  </label>
                  <div class="error-message" *ngIf="isFieldInvalid('acceptTerms')">
                    É necessário aceitar os termos
                  </div>
                </div>
                
                <div class="checkbox-group">
                  <label class="checkbox-label">
                    <input type="checkbox" formControlName="receiveNews">
                    <span class="checkmark"></span>
                    Desejo receber informações sobre as atividades da Santa Casa de Lorena
                  </label>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="form-actions">
                <button type="submit" 
                        class="donate-btn"
                        [disabled]="paymentForm.invalid || isProcessing"
                        [class.loading]="isProcessing">
                  <span *ngIf="!isProcessing">
                    <i class="lock-icon">🔒</i>
                    Finalizar Doação - R$ {{ donationAmount | currency:'BRL':'symbol':'1.2-2':'pt' }}
                  </span>
                  <span *ngIf="isProcessing">
                    <i class="spinner"></i>
                    Processando...
                  </span>
                </button>
                
                <div class="security-note">
                  <img src="assets/images/ssl-badge.png" alt="SSL">
                  <span>Seus dados estão protegidos com criptografia SSL</span>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="payment-footer">
    <div class="container">
      <div class="footer-content">
        <div class="payment-badges">
          <img src="assets/images/visa-badge.png" alt="Visa">
          <img src="assets/images/mastercard-badge.png" alt="Mastercard">
          <img src="assets/images/pix-badge.png" alt="PIX">
          <img src="assets/images/ssl-badge.png" alt="SSL Seguro">
        </div>
        
        <p class="footer-text">
          © 2024 Santa Casa de Lorena - Todos os direitos reservados
        </p>
      </div>
    </div>
  </div>
</div>

