<div class="home-page min-vh-100">

  <!-- carrossel -->
  <section class="hero-carousel" #heroCarousel
           (mousedown)="onDragStart($event)"
           (mousemove)="onDragMove($event)"
           (mouseup)="onDragEnd($event)"
           (mouseleave)="onDragEnd($event)"
           (touchstart)="onDragStart($event)"
           (touchmove)="onDragMove($event)"
           (touchend)="onDragEnd($event)">

    <div class="carousel-container"
         [style.transform]="'translateX(' + currentTranslate + '%)'"
         [style.transition]="currentTransition">

      <div class="carousel-slide"
           *ngFor="let slide of heroSlides; let i = index"
           [style.backgroundImage]="'url(' + slide.currentImage + ')'"
           [class.clickable]="!!slide.newsId"
           (click)="onSlideClick(slide)">
      </div>
    </div>

    <!-- setas -->
    <button class="carousel-arrow left" aria-label="Anterior" (click)="prevSlide()">
      <svg viewBox="0 0 24 24" width="22" height="22">
        <path d="M15.5 19l-7-7 7-7" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>

    <button class="carousel-arrow right" aria-label="Próximo" (click)="nextSlide()">
      <svg viewBox="0 0 24 24" width="22" height="22">
        <path d="M8.5 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>

    <!-- indicadores -->
    <div class="carousel-indicators">
      <span *ngFor="let slide of heroSlides; let i = index"
            class="indicator"
            [class.active]="i === currentSlide"
            (click)="goToSlide(i)">
      </span>
    </div>
  </section>

  <!-- Services Section  -->
  <section class="py-5 services-section">
    <div class="container">
      <!-- Título e descrição centralizados -->
      <div class="text-center mb-5">
        <h2 class="fw-bold">Nossos serviços</h2>
        <p class="text-muted">Oferecemos uma ampla gama de serviços médicos com qualidade e dedicação.</p>
      </div>

      <div class="row g-4">
        <div *ngFor="let service of heroServices" class="col-12 col-sm-6 col-lg-3">
          <!-- Usa routerLink para rotas internas -->
          <a [routerLink]="service.link" class="text-decoration-none">
            <div class="card h-100 shadow-lg border-0 rounded-4 service-card">
              <div class="card-body text-center p-4">
                <div class="service-icon-wrapper mx-auto mb-3">
                  <img [src]="service.image"
                       [alt]="service.title"
                       class="img-fluid rounded-3"
                       style="width: 130px; height: 130px; object-fit: cover;" />
                </div>
                <h5 class="card-title fw-semibold mb-2">{{ service.title }}</h5>
                <p class="card-text text-muted small">{{ service.description }}</p>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Seção Como Podemos Te Ajudar - NOVA SEÇÃO -->
  <section class="py-5 help-section">
    <div class="container">
      <!-- Título alinhado à esquerda -->
      <div class="mb-5">
        <h2 class="fw-bold mb-0">Como podemos te ajudar?</h2>
        <p class="text-muted mt-2">Encontre os serviços que você precisa de forma rápida e prática</p>
      </div>

      <div class="row g-4">
        <!-- Agendamentos Online -->
        <div class="col-12 col-sm-6 col-lg-3">
          <a routerLink="/agendamentos" class="text-decoration-none">
            <div class="card h-100 shadow-lg border-0 rounded-4 service-card">
              <div class="card-body text-center p-4">
                <div class="service-icon-wrapper mx-auto mb-3">
                  <div class="help-icon bg-primary text-white rounded-3 d-flex align-items-center justify-content-center">
                    <i class="bi bi-calendar-check fs-2"></i>
                  </div>
                </div>
                <h5 class="card-title fw-semibold mb-2">Agendamentos Online</h5>
                <p class="card-text text-muted small">Agende sua consulta, procedimento ou exame de forma rápida e prática</p>
              </div>
            </div>
          </a>
        </div>

        <!-- Resultados de Exames -->
        <div class="col-12 col-sm-6 col-lg-3">
          <a (click)="navigateToExternal('https://1741prd-vivace-portal.cloudmv.com.br:432/login')" class="text-decoration-none">
            <div class="card h-100 shadow-lg border-0 rounded-4 service-card">
              <div class="card-body text-center p-4">
                <div class="service-icon-wrapper mx-auto mb-3">
                  <div class="help-icon bg-success text-white rounded-3 d-flex align-items-center justify-content-center">
                    <i class="bi bi-file-medical fs-2"></i>
                  </div>
                </div>
                <h5 class="card-title fw-semibold mb-2">Resultados de Exames</h5>
                <p class="card-text text-muted small">Acesse seus resultados de exames de forma segura</p>
              </div>
            </div>
          </a>
        </div>

        <!-- Procure seu médico -->
        <div class="col-12 col-sm-6 col-lg-3">
          <a routerLink="/corpo-clinico" class="text-decoration-none">
            <div class="card h-100 shadow-lg border-0 rounded-4 service-card">
              <div class="card-body text-center p-4">
                <div class="service-icon-wrapper mx-auto mb-3">
                  <div class="help-icon bg-info text-white rounded-3 d-flex align-items-center justify-content-center">
                    <i class="bi bi-search-heart fs-2"></i>
                  </div>
                </div>
                <h5 class="card-title fw-semibold mb-2">Procure seu médico</h5>
                <p class="card-text text-muted small">Busque e conheça nosso corpo clínico especializado</p>
              </div>
            </div>
          </a>
        </div>

        <!-- Saúde Digital -->
        <div class="col-12 col-sm-6 col-lg-3">
          <a routerLink="/telemedicina" class="text-decoration-none">
            <div class="card h-100 shadow-lg border-0 rounded-4 service-card">
              <div class="card-body text-center p-4">
                <div class="service-icon-wrapper mx-auto mb-3">
                  <div class="help-icon bg-warning text-white rounded-3 d-flex align-items-center justify-content-center">
                    <i class="bi bi-laptop fs-2"></i>
                  </div>
                </div>
                <h5 class="card-title fw-semibold mb-2">Saúde Digital</h5>
                <p class="card-text text-muted small">Acesso aos médicos do hospital sem sair de casa</p>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Convênios  -->
  <section class="py-5 convenios-section">
    <div class="container">
      <!-- Título alinhado à esquerda -->
      <div class="mb-5">
        <h2 class="fw-bold mb-0">{{ convenios.title }}</h2>
        <p class="text-muted mt-2" style="max-width:700px;">{{ convenios.description }}</p>
      </div>

      <div class="row row-cols-2 row-cols-md-3 row-cols-lg-6 g-3">
        <div *ngFor="let conv of convenios.items" class="col">
          <div class="bg-white p-3 rounded shadow-sm">
            <div class="bg-light rounded d-flex align-items-center justify-content-center" style="height: 100%;">
              <img *ngIf="conv.imageUrl"
                   [src]="conv.imageUrl"
                   [alt]="conv.name"
                   class="img-fluid"
                   style="max-height: 100%; max-width: 100%; object-fit: contain;" />

              <span *ngIf="!conv.imageUrl" class="text-muted small">
                {{ conv.name }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- News - NOVO LAYOUT INSPIRADO -->
  <section class="py-5 bg-light news-section">
    <div class="container">
      <!-- Título e Filtros -->
      <div class="mb-4">
        <div class="d-flex justify-content-between align-items-start mb-3">
          <div>
            <h2 class="fw-bold mb-0">Em Destaque</h2>
            <!-- Filtros de Categorias -->
            <div class="categories-filter mt-3">
              <div class="d-flex flex-wrap gap-2">
                <button class="btn btn-outline-secondary btn-sm fw-medium"
                        [class.active]="selectedCategory === ''"
                        (click)="filterByCategory('')">
                  Todas
                </button>
                <button *ngFor="let category of categories"
                        class="btn btn-outline-secondary btn-sm fw-medium"
                        [class.active]="selectedCategory === category"
                        (click)="filterByCategory(category)">
                  {{ category }}
                </button>
              </div>
            </div>
          </div>

          <!-- Botão Ver Todas as Notícias -->
          <a routerLink="/noticias" class="btn btn-outline-primary fw-semibold text-decoration-none d-flex align-items-center gap-2 mt-4">
            Ver todas as notícias <i class="bi bi-arrow-right"></i>
          </a>
        </div>
      </div>

      <div class="row g-4">
        <!-- Destaque Principal -->
        <div class="col-12 col-lg-7">
          <div class="news-featured-card position-relative rounded-4 overflow-hidden shadow-lg">
            <img *ngIf="filteredNews[0]?.imageUrl"
                 [src]="filteredNews[0]?.imageUrl"
                 [alt]="filteredNews[0]?.title"
                 class="img-fluid w-100 news-featured-image">

            <!-- Overlay -->
            <div class="news-overlay position-absolute bottom-0 start-0 w-100 p-4">
              <span *ngIf="filteredNews[0]?.category" class="badge bg-primary mb-2">{{ filteredNews[0]?.category }}</span>
              <h3 class="fw-bold text-white mb-2">{{ filteredNews[0]?.title }}</h3>
              <p class="text-white-50 small mb-3">
                {{ filteredNews[0]?.description || (filteredNews[0]?.content?.substring(0, 120) + '...') }}
              </p>
              <a [routerLink]="['/noticia', filteredNews[0]?.id]" class="btn btn-light btn-sm fw-semibold">
                Leia mais <i class="bi bi-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>

        <!-- Outras Notícias -->
        <div class="col-12 col-lg-5">
          <div class="row g-3">
            <div *ngFor="let item of filteredNews | slice:1:4" class="col-12">
              <div class="d-flex news-list-item rounded-3 overflow-hidden shadow-sm bg-white">
                <!-- Imagem -->
                <div class="flex-shrink-0" style="width: 120px;">
                  <img *ngIf="item.imageUrl"
                       [src]="item.imageUrl"
                       [alt]="item.title"
                       class="img-fluid h-100 w-100 object-fit-cover">
                </div>
                <!-- Texto -->
                <div class="p-3 flex-grow-1">
                  <small *ngIf="item.category" class="text-primary fw-bold d-block mb-1">
                    {{ item.category }}
                  </small>
                  <h6 class="fw-bold mb-2">{{ item.title }}</h6>
                  <p class="small text-muted mb-2">
                    {{ item.description || (item.content?.substring(0, 80) + '...') }}
                  </p>
                  <a [routerLink]="['/noticia', item.id]"
                     class="small fw-semibold text-decoration-none text-primary">
                    Ler mais <i class="bi bi-arrow-right small"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <!-- CTA -->
  <section class="py-5 text-white text-center" [style.background]="cta.bgGradient">
    <div class="container">
      <h2 class="fw-bold mb-3">{{ cta.title }}</h2>
      <p class="mb-4 mx-auto" style="max-width:700px;">{{ cta.description }}</p>
      <a [routerLink]="['/manual-do-paciente-visitante']" class="btn btn-light btn-lg" style="color: #22BCEE;">
        {{ cta.buttonLabel }}
      </a>
    </div>
  </section>

</div>
