<div class="payment-container">
  <!-- Header -->
  <header class="payment-header">
    <div class="container">
      <div class="header-content">
        <button class="back-btn" (click)="goBack()">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
          </svg>
          <span>Voltar</span>
        </button>
        
        <div class="logo-container">
          <img src="assets/img/logo/logo.png" alt="Santa Casa de Lorena" class="logo">
        </div>
        
        <div class="security-info">
          <div class="security-badge">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
            </svg>
          </div>
          <span>Conexão Segura</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Progress Indicator -->
  <div class="progress-section">
    <div class="container">
      <div class="progress-steps">
        <div class="step completed">
          <div class="step-circle">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
          </div>
          <span>Valor Selecionado</span>
        </div>
        
        <div class="step-line"></div>
        
        <div class="step active">
          <div class="step-circle">
            <span>2</span>
          </div>
          <span>Dados de Pagamento</span>
        </div>
        
        <div class="step-line"></div>
        
        <div class="step">
          <div class="step-circle">
            <span>3</span>
          </div>
          <span>Confirmação</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="payment-content">
    <div class="container">
      <div class="payment-grid">
        <!-- Left Column - Donation Summary -->
        <aside class="donation-summary">
          <div class="summary-card">
            <div class="card-header">
              <h2>Resumo da Doação</h2>
              <div class="heart-icon">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
              </div>
            </div>
            
            <div class="donation-details">
              <div class="amount-display">
                <span class="amount-label">Valor da doação</span>
                <span class="amount-value">{{ formatCurrency(donationAmount) }}</span>
              </div>
              
              <div class="detail-list">
                <div class="detail-item">
                  <span class="label">Destinação:</span>
                  <span class="value">Santa Casa de Lorena</span>
                </div>
                
                <div class="detail-item">
                  <span class="label">Tipo:</span>
                  <span class="value">Doação única</span>
                </div>
                
                <div class="detail-item">
                  <span class="label">Método:</span>
                  <span class="value">{{ getPaymentMethodName() }}</span>
                </div>
              </div>
            </div>
            
            <div class="impact-message">
              <div class="impact-content">
                <h3>Seu Impacto</h3>
                <p>
                  Com sua doação de <strong>{{ formatCurrency(donationAmount) }}</strong>, você está ajudando a 
                  manter nossos serviços de saúde gratuitos e de qualidade para quem mais precisa.
                </p>
              </div>
              <div class="impact-visual">
                <div class="impact-circle">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                  </svg>
                </div>
              </div>
            </div>
            
            <div class="tax-info">
              <div class="info-header">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                </svg>
                <span>Informação Importante</span>
              </div>
              <p>
                Esta doação pode ser dedutível do imposto de renda. 
                Você receberá o recibo por e-mail após a confirmação do pagamento.
              </p>
            </div>
          </div>
        </aside>

        <!-- Right Column - Payment Form -->
        <section class="payment-form-section">
          <div class="payment-card">
            <div class="card-header">
              <h2>Dados para Pagamento</h2>
              <div class="security-badge-inline">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                </svg>
                <span>Dados Protegidos</span>
              </div>
            </div>
            
            <!-- Payment Methods -->
            <div class="payment-methods">
              <h3>Escolha a forma de pagamento</h3>
              
              <div class="method-options">
                <div class="method-option" 
                     [class.selected]="selectedMethod === 'credit'" 
                     (click)="selectPaymentMethod('credit')">
                  <div class="method-content">
                    <div class="method-icon">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
                      </svg>
                    </div>
                    <div class="method-info">
                      <span class="method-name">Cartão de Crédito</span>
                      <span class="method-description">Aprovação instantânea</span>
                    </div>
                  </div>
                  <div class="method-check" *ngIf="selectedMethod === 'credit'">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                  </div>
                </div>
                
                <div class="method-option" 
                     [class.selected]="selectedMethod === 'pix'" 
                     (click)="selectPaymentMethod('pix')">
                  <div class="method-content">
                    <div class="method-icon">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                      </svg>
                    </div>
                    <div class="method-info">
                      <span class="method-name">PIX</span>
                      <span class="method-description">Transferência instantânea</span>
                    </div>
                  </div>
                  <div class="method-check" *ngIf="selectedMethod === 'pix'">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                  </div>
                </div>
                
                <div class="method-option" 
                     [class.selected]="selectedMethod === 'boleto'" 
                     (click)="selectPaymentMethod('boleto')">
                  <div class="method-content">
                    <div class="method-icon">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                      </svg>
                    </div>
                    <div class="method-info">
                      <span class="method-name">Boleto Bancário</span>
                      <span class="method-description">Vencimento em 3 dias</span>
                    </div>
                  </div>
                  <div class="method-check" *ngIf="selectedMethod === 'boleto'">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                  </div>
                </div>
              </div>
            </div>

            <!-- Payment Form -->
            <form [formGroup]="paymentForm" (ngSubmit)="processPayment()" class="payment-form">
              <!-- Personal Information -->
              <div class="form-section">
                <div class="section-header">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                  </svg>
                  <h3>Dados Pessoais</h3>
                </div>
                
                <div class="form-grid">
                  <div class="form-group full-width">
                    <label for="fullName">Nome Completo *</label>
                    <div class="input-wrapper">
                      <input type="text" 
                             id="fullName" 
                             formControlName="fullName"
                             placeholder="Digite seu nome completo"
                             [class.error]="isFieldInvalid('fullName')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('fullName')">
                      Nome completo é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="email">E-mail *</label>
                    <div class="input-wrapper">
                      <input type="email" 
                             id="email" 
                             formControlName="email"
                             placeholder="seu@email.com"
                             [class.error]="isFieldInvalid('email')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('email')">
                      E-mail válido é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="phone">Telefone</label>
                    <div class="input-wrapper">
                      <input type="tel" 
                             id="phone" 
                             formControlName="phone"
                             placeholder="(11) 99999-9999">
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="cpf">CPF *</label>
                    <div class="input-wrapper">
                      <input type="text" 
                             id="cpf" 
                             formControlName="cpf"
                             placeholder="000.000.000-00"
                             [class.error]="isFieldInvalid('cpf')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('cpf')">
                      CPF válido é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="birthDate">Data de Nascimento</label>
                    <div class="input-wrapper">
                      <input type="date" 
                             id="birthDate" 
                             formControlName="birthDate">
                    </div>
                  </div>
                </div>
              </div>

              <!-- Credit Card Form -->
              <div class="form-section" *ngIf="selectedMethod === 'credit'">
                <div class="section-header">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
                  </svg>
                  <h3>Dados do Cartão</h3>
                </div>
                
                <div class="form-grid">
                  <div class="form-group full-width">
                    <label for="cardNumber">Número do Cartão *</label>
                    <div class="input-wrapper">
                      <input type="text" 
                             id="cardNumber" 
                             formControlName="cardNumber"
                             placeholder="0000 0000 0000 0000"
                             [class.error]="isFieldInvalid('cardNumber')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('cardNumber')">
                      Número do cartão é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group full-width">
                    <label for="cardName">Nome no Cartão *</label>
                    <div class="input-wrapper">
                      <input type="text" 
                             id="cardName" 
                             formControlName="cardName"
                             placeholder="Nome como está no cartão"
                             [class.error]="isFieldInvalid('cardName')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('cardName')">
                      Nome no cartão é obrigatório
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="expiryDate">Validade *</label>
                    <div class="input-wrapper">
                      <input type="text" 
                             id="expiryDate" 
                             formControlName="expiryDate"
                             placeholder="MM/AA"
                             [class.error]="isFieldInvalid('expiryDate')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('expiryDate')">
                      Data de validade é obrigatória
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="cvv">CVV *</label>
                    <div class="input-wrapper">
                      <input type="text" 
                             id="cvv" 
                             formControlName="cvv"
                             placeholder="000"
                             [class.error]="isFieldInvalid('cvv')">
                    </div>
                    <div class="error-message" *ngIf="isFieldInvalid('cvv')">
                      CVV é obrigatório
                    </div>
                  </div>
                </div>
              </div>

              <!-- PIX Instructions -->
              <div class="form-section" *ngIf="selectedMethod === 'pix'">
                <div class="pix-info">
                  <div class="pix-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                  </div>
                  <div class="pix-content">
                    <h4>Pagamento via PIX</h4>
                    <p>Após confirmar os dados, você receberá um QR Code para realizar o pagamento instantaneamente pelo seu banco.</p>
                  </div>
                </div>
              </div>

              <!-- Boleto Instructions -->
              <div class="form-section" *ngIf="selectedMethod === 'boleto'">
                <div class="boleto-info">
                  <div class="boleto-icon">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                    </svg>
                  </div>
                  <div class="boleto-content">
                    <h4>Pagamento via Boleto</h4>
                    <p>O boleto será gerado após a confirmação dos dados e poderá ser pago em qualquer banco ou lotérica. Vencimento em 3 dias úteis.</p>
                  </div>
                </div>
              </div>

              <!-- Terms and Privacy -->
              <div class="form-section">
                <div class="checkbox-group">
                  <label class="checkbox-label">
                    <input type="checkbox" 
                           formControlName="acceptTerms"
                           [class.error]="isFieldInvalid('acceptTerms')">
                    <span class="checkmark">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                      </svg>
                    </span>
                    <span class="checkbox-text">
                      Aceito os <a href="/terms" target="_blank">Termos de Uso</a> e 
                      <a href="/privacy" target="_blank">Política de Privacidade</a> *
                    </span>
                  </label>
                  <div class="error-message" *ngIf="isFieldInvalid('acceptTerms')">
                    É necessário aceitar os termos
                  </div>
                </div>
                
                <div class="checkbox-group">
                  <label class="checkbox-label">
                    <input type="checkbox" formControlName="receiveNews">
                    <span class="checkmark">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                      </svg>
                    </span>
                    <span class="checkbox-text">
                      Desejo receber informações sobre as atividades da Santa Casa de Lorena
                    </span>
                  </label>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="form-actions">
                <button type="submit" 
                        class="donate-btn"
                        [disabled]="paymentForm.invalid || isProcessing"
                        [class.loading]="isProcessing">
                  <span *ngIf="!isProcessing" class="btn-content">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                    </svg>
                    <span>Finalizar Doação - {{ formatCurrency(donationAmount) }}</span>
                  </span>
                  <span *ngIf="isProcessing" class="btn-loading">
                    <div class="spinner"></div>
                    <span>Processando...</span>
                  </span>
                </button>
                
                <div class="security-note">
                  <div class="security-badges">
                    <div class="badge">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"/>
                      </svg>
                      <span>SSL Seguro</span>
                    </div>
                    <div class="badge">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17,9H7V7A5,5 0 0,1 12,2A5,5 0 0,1 17,7V9M6,20V10H18V20H6Z"/>
                      </svg>
                      <span>PCI Compliant</span>
                    </div>
                  </div>
                  <p>Seus dados estão protegidos com criptografia de nível bancário</p>
                </div>
              </div>
            </form>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="payment-footer">
    <div class="container">
      <div class="footer-content">
        <div class="payment-badges">
          <div class="badge-group">
            <span class="badge-label">Aceitamos:</span>
            <div class="badges">
              <div class="badge">Visa</div>
              <div class="badge">Mastercard</div>
              <div class="badge">PIX</div>
              <div class="badge">Boleto</div>
            </div>
          </div>
        </div>
        
        <p class="footer-text">
          © 2024 Santa Casa de Lorena - Todos os direitos reservados
        </p>
      </div>
    </div>
  </footer>
</div>

